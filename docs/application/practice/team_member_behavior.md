# チームのメンバーの行動
- 概要
    - 自分も含めたメンバーは合理的、非合理的な理由で以下のように行動する
    - そのことを前提にして設計と実装を行うべき
- 行動
    - メンバーは既存コードを模範としてコードを書く
        - レビューされたコードをいちいち正しいかを疑うのは手間になるため
        - 自分自身に責任が発生しないため
        - 1からの設計はコストであるため
    - 再利用できないコードであるとき、メンバーはコードを複製する
        - 再利用できない場合、設計作業のコストと責任を自分が負うことになるため
    - 再利用できるコードであるとき、メンバーはコードを再利用する
        - それがシンプルで簡単な方法であるため
        - 既存コードはすでにレビュー済みであり動作しているため
    - メンバーは良いコードを模範に、良いコードを書いてくれる
    - メンバーはコードに設計が反映されていると思いがち
    - メンバーはコードからメッセージを受け取る
        - コメントではなくコメントしたい内容をメソッドに切り出すべき
        - コメントは実行されないのでメンテナンスされない（傾向がある）
        - コメントが必要なケースをルールとして定めるべき


## チームのメンバーの行動を先読みする
### ■ストーリー

あなたは仕様を満たしているけど設計がお粗末な「良くないコード」のプルリクを送り、「何故か」レビュアーがレビューを通してしまい、マージまでされてしまう。

時間が無いなど何か事情があったのかもしれないが、レビューされマージされたので、他のメンバーの目にもその「良くないコード」は触れるようになる。

あなたのその「良くないコード」を初めて見たメンバーは、そのコードについて、どのように感じるか？

---

### 「良くないコード」を読んだメンバーの心の声


```
レビューを通って、テストも正常にパスしているのだから、
このコードは「正しく設計された良いコード」のはずだ
```


これらの認識からメンバーはどのように行動するか？

---

### 「良くないコード」を読んだメンバーの行動

- 「良くないコード」を良いコードと勘違いし、
 「良くないコード」をアプリケーションの様々な場所で使い始める
- 「良くないコード」は再利用性が低いので**コピペして**使われる
- 「良くないコード」をお手本に「別の良くないコード」を書き始める
- 「良くないコード」を基準にコードレビューを始める


良くないコードは「無駄に複雑な依存関係」をアプリケーション全体にばら撒き、「良くないコードの再生産」まで始めてしまう

---

### メンバーの行動は合理的
- すでに一度レビューを通ったコードを「良いコード」か疑うことは、コードの再レビューを行っているようなもので無駄
- 仮に「良くないコード」であると気づいたとき、複数の新しいタスクが生まれてしまい、進捗が遅れる可能性を考え指摘しない
	- 再設計
	- 再実装
	- 使用している箇所の修正
	- 再レビュー
- 指摘したとき「良くないコード」の修正作業とその責任を自分が負うかもしれない、という疑念から指摘を避けてしまう

メンバーは合理的に、純粋に悪気なくそのように行動する。

もしそのように行動しない善良さと勤勉さを期待するなら、それはただ「良くないコード」を書いた自分の責任を他人に負わせているだけ。


---
### 逆に「良いコード」を読んだメンバーの行動

- 「良いコード」は適切に依存関係が管理されているので、適切な場所で使用される
	- 良いコードはその使用を強制したり、逆に制限することで依存関係を管理している
- 「良いコード」をコピペではなく再利用のかたちで使用される
- 「良いコード」をお手本に「別の良いコード」を書き始める
- 「良いコード」を基準にコードレビューを始める

---

## 良いコード、TRUEなコード
### TRUEの原則

- Transparent（見通しが良い）
	- 変更するコードにおいても、そのコードに依存する別の場所のコードにおいても、変更がもたらす影響が明白である
- Reasonable（合理的）
	- どんな変更であっても、かかるコストは変更がもたらす利益にふさわしい
- Usable（利用性が高い）
	- 新しい環境、予期していなかった環境でも再利用できる
- Exemplary（模範的）
	- コードに変更を加える人が、上記の品質を保つようなコードになっている

--- 
# まとめ

チームのメンバーはあなたのコードが「適切に設計された良いコード」だと信じ、あなたのコードを模範とし新たなコードを書き、あなたのコードをアプリケーションの様々な場所で再利用し、レビューの基準にさえする。

そのため、あなたが悪いコードを書いてしまうと、その「悪いコード」をお手本としたコードや、コピペの形で、アプリケーション中に感染していく。レビュアーにも感染する。

TRUEの原則などに従った良いコードを書かなければ、アプリケーションのコードの質は全体的に下がっていくことになる。
