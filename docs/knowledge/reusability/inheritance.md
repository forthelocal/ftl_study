# 継承
- 継承とは、あるオブジェクトが受け取ったメッセージを別のオブジェクトに委譲する、という関係を2つのオブジェクトの間で結ぶこと
    - メッセージの自動委譲によるコードの共通化を実現する
    - 山程共通の振る舞いを持つものの、いくつかの面においては相違もある型で継承は必要になる
    - 現在抱えている問題が、安定した、共通の抽象のいくつもの専門性を必要とするものであれば、継承は極めてコストの低い解決方法
- 具象クラスから始める。いきなり抽象クラスから書き始めない　
    - コードをスーパークラスに昇格するより、サブクラスに降格させるほう簡単
    - すべてをさげて必要なものを引き上げる
    - 具象的な部分を残してしまうリスクが有る
        - そのときその不完全なコードは「クラスの確認をする」ようになっている
            - そこに具象的な部分が残っており、依存関係を生んでいる
- 自身の「分類」を保持するとき属性をもっているとき、そこには根底にパターンが存在している
    - style, category, typeなど
- 直接応答するか「他のオブジェクトに委譲する」か = その関係を自動で行うのが「継承」
- 生物的な系図での説明は誤解を招く
    - 通常、先祖は２つの個体からなる。多くのオブジェクト指向言語は単一継承
- ダックタイピングは「クラスを横断」するもの
- サブクラスはスーパークラスのすべてであり、かつスーパークラスを上回るもの
- スーパークラスを特化したものがサブクラス
- 継承のルール
    - モデル化しているオブジェクトが一般-特殊の関係になっている
    - 正しいコーディングテクニックを使っている
- 一つのサブクラスしか持たないスーパークラスは無意味
- スーパークラスは3種類のクラスが出てきたときに検討したほうがよい
    - ３つくらいでれば要件が固まっている
- 継承を使うかどうかの判断のポイントはコスパ
    - 階層構造を作るのはコストがかかる
    - 「あとどれくらいで3種類目のオブジェクトがでるか」「複製のコストがどれだけあるか」で考える
    - たとえ二種類でも複製したクラスを毎日変更しているなら、継承を使うメリットがある
-  テンプレートメソッドパターン
    - スーパークラス内で基本の構造を定義
    - サブクラスは固有の機能を実装する
- 明確に把握できない要件をスーパークラスが抱えているとき、例外を飛ばすなどし、継承の漏れを通知する
- スーパークラスとサブクラスで起こる密結合
    - サブクラスがスーパークラスを知りすぎている
        - スーパークラスが特定のメソッドをもっていること
        - 引数や返り値、具体的なメソッド名
        - そもそもsuperを叩いている時点で、サブクラスはスーパークラスの処理のアルゴリズムを知っていることになる
            - 知っていることは依存関係を生む
        - superは忘れがち
            - superでオーバーライドしたメソッドを呼ぶとき、処理の順番がきまっている（どのようにスーパークラスと関わるかが決められている）
                - コンテキストが大きい
        - 「フックメッセージ」で結合を疎にする
            - 初期化のタイミングなどをサブクラスは知っている必要がなくなる
            - 抽象的なアルゴリズムを知らなくてもサブクラスに専門性を加えることが可能になる
